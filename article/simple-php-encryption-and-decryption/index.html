<!DOCTYPE html><html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Christopher Hill</title>
	<meta name="keywords" content="christopher hill, chris hill, web developer, php programmer, personal blog">
	<meta name="description" content="I'm Chris. A thirty-something husband, graduate, star gazer, aspiring triathlete, vegetarian, reader, writer, cinemaniac, and love of life in general.">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="shortcut icon" href="favicon.ico" type="image/ico">

	<meta name="theme-color" content="#efefef">
	<meta name="msapplication-navbutton-color" content="#efefef">
	<meta name="apple-mobile-web-app-status-bar-style" content="#efefef">
</head>
<body>
	
<nav class="nav__overlay">
	<div class="container container--header">
		<a href="/" class="icon_close">
			<i class="fas fa-times"></i>
		</a>

		<ul>
			<li><a href="/#i-am">About</a></li>
			<li><a href="/#i-made">Development</a></li>
			<li><a href="/#i-write">Blog</a></li>
			<li><a href="mailto:cjhill@gmail.com?subject=Website contact request">Contact</a></li>
		</ul>
	</div>
</nav>

<header class="article__single">
	<div class="container container--header">
		<a href="/" class="icon_nav">
			<i class="fas fa-bars"></i>
			<span class="icon__label">Menu</span>
		</a>

		<!-- Start of Article //-->
		<h1>Simple PHP Encryption and Decryption</h1>

		<p style="background:#f7f7f7;border-left:4px solid #ff6961;border-radius:5px;padding:1rem;">
		This is an old post from 2011. As such, it might not be relevant anymore.</p>
		</p>

		<div class="article__single_content">
			<p>The need for encryption and decryption in general day-to-day Web programming is quite rare. But it can crop up from every now and again. I use a class that handles both encryption and decryption using <a href="http://php.net/manual/en/book.mcrypt.php">mcrypt</a> and the Rijndael algorithm (AES) and a 256 bit key size.</p>
		
			<p>An important notes to make about encryption (especially this class) is that the output is binary, so you need to make sure if you&#8217;re storing it in a database that you use the correct data type, or if you are storing it in a file then give it a correct file extension (alternatively you can just not give it an extension). This is important as storing as, for instance, a .txt will contaminate the cipher text.</p>
		
			<pre>
&lt;?php
class SimpleEncryption
{
    /**
     * Encrypts a string with a given key.
     *
     * @param string $content
     * @param string $key
     * @return binary
     */
    public function encrypt($content, $key) {
        $ivSize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC); 
        $iv     = mcrypt_create_iv($ivSize, MCRYPT_RAND); 
        return    mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $content, MCRYPT_MODE_CBC, $iv); 
    }
    
    /**
     * Decrypts a string with a given key.
     *
     * @param binary $content
     * @param string $key
     * @return string
     */
    public function decrypt($content, $key) {
        $ivSize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC); 
        $iv     = mcrypt_create_iv($ivSize, MCRYPT_RAND); 
        return    mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $content, MCRYPT_MODE_CBC, $iv);
    }
}
</pre>
			<!-- End of article //-->
		</div>
	</div>
</header>
	
<footer>
	<div class="container">
		<p>
			<strong>I'm Chris.</strong>
			<span>A thirty-something husband, graduate, star gazer, aspiring triathlete, explorer, vegetarian, reader, writer, cinemaniac, and lover of life in general.</span>
		</p>

		<p>
			Contents copyright Â© Christopher Hill unless stated otherwise.
			This is my website. There are many like it, but this one is mine.
		</p>

		<p>
			<a href="/#i-am">About</a> |
			<a href="/#i-made">Development</a> |
			<a href="/#i-write">Blog</a> |
			<a href="mailto:cjhill@gmail.com?subject=Website contact request">Contact</a>
		</p>
	</div>
</footer>
		
<link rel="stylesheet" media="screen" preload href="/styles/styles.css?v=2021-03-12.02" type="text/css">
<link rel="stylesheet" media="screen" preload href="https://fonts.googleapis.com/css?family=EB+Garamond">
<link rel="stylesheet" media="screen" preload href="https://fonts.googleapis.com/css?family=Ubuntu:300,700">
<link rel="stylesheet" media="screen" preload href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">

<script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script defer src="/scripts/scripts.js?v=2021-03-12.02"></script>
<script>
	window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
	ga('create','UA-4241275-1','auto');ga('send','pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>
</body>
</html>