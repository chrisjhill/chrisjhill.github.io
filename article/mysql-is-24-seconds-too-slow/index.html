<!DOCTYPE html><html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Christopher Hill</title>
	<meta name="keywords" content="christopher hill, chris hill, web developer, php programmer, personal blog">
	<meta name="description" content="I'm Chris. A thirty-something husband, graduate, star gazer, aspiring triathlete, vegetarian, reader, writer, cinemaniac, and love of life in general.">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="shortcut icon" href="favicon.ico" type="image/ico">

	<meta name="theme-color" content="#efefef">
	<meta name="msapplication-navbutton-color" content="#efefef">
	<meta name="apple-mobile-web-app-status-bar-style" content="#efefef">
</head>
<body>
	
<nav class="nav__overlay">
	<div class="container container--header">
		<a href="/" class="icon_close">
			<i class="fas fa-times"></i>
		</a>

		<ul>
			<li><a href="/#i-am">About</a></li>
			<li><a href="/#i-made">Development</a></li>
			<li><a href="/#i-write">Blog</a></li>
			<li><a href="mailto:cjhill@gmail.com?subject=Website contact request">Contact</a></li>
		</ul>
	</div>
</nav>

<header class="article__single">
	<div class="container container--header">
		<a href="/" class="icon_nav">
			<i class="fas fa-bars"></i>
			<span class="icon__label">Menu</span>
		</a>

		<!-- Start of Article //-->
		<h1>MySQL is 24 seconds too slow</h1>

		<p style="background:#f7f7f7;border-left:4px solid #ff6961;border-radius:5px;padding:1rem;">
		This is an old post from 2009. As such, it might not be relevant anymore.</p>
		</p>

		<div class="article__single_content">
			<p>1246402800. A perfectly valid UNIX timestamp, but one that created some confusion and head scratching in our office for one of our latest internal projects. The problem came around when converting the timestamp into a MySQL date using the <a href="http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime">FROM_UNIXTIME</a> function which produced the wrong output.</p>
		
			<p>The timestamp is perfectly valid, it’s the timestamp for 1st June 2009, 00:00:00 (check it, if you don’t believe me). However, when running it through the FROM_UNIXTIME function it outputs:</p>
		
			<pre>SELECT FROM_UNIXTIME(1246402800)
&gt; 2009-06-30 23:59:36</pre>

			<p>It’s 24 seconds out. How on God’s green Earth is that possible? I tried it on another of our servers and it outputs the correct date, leading me us to assume it&#8217;s not a problem with MySQL but with our database installation. The MySQL manual states that:</p>
	
			<blockquote>
				<p>Note: If you use UNIX_TIMESTAMP() and FROM_UNIXTIME() to convert between TIMESTAMP values and Unix timestamp values, the conversion is lossy because the mapping is not one-to-one in both directions.</p>
			</blockquote>
		
			<p>Our server is set to GMT, but that is besides the point—it&#8217;s 24 seconds out, a different timezone would be hours (or half hours) out.</p>
		
			<hr />
		
			<p><strong>Update</strong>: Discovered the problem not long after posting this. It relates to <a href="http://en.wikipedia.org/wiki/Leap_second">leap seconds</a>, which you can read more about on the <a href="http://dev.mysql.com/doc/refman/5.0/en/time-zone-leap-seconds.html">MySQL documentation page</a>.</p>
			<!-- End of article //-->
		</div>
	</div>
</header>
	
<footer>
	<div class="container">
		<p>
			<strong>I'm Chris.</strong>
			<span>A thirty-something husband, graduate, star gazer, aspiring triathlete, explorer, vegetarian, reader, writer, cinemaniac, and lover of life in general.</span>
		</p>

		<p>
			Contents copyright © Christopher Hill unless stated otherwise.
			This is my website. There are many like it, but this one is mine.
		</p>

		<p>
			<a href="/#i-am">About</a> |
			<a href="/#i-made">Development</a> |
			<a href="/#i-write">Blog</a> |
			<a href="mailto:cjhill@gmail.com?subject=Website contact request">Contact</a>
		</p>
	</div>
</footer>
		
<link rel="stylesheet" media="screen" preload href="/styles/styles.css?v=2021-03-12.02" type="text/css">
<link rel="stylesheet" media="screen" preload href="https://fonts.googleapis.com/css?family=EB+Garamond">
<link rel="stylesheet" media="screen" preload href="https://fonts.googleapis.com/css?family=Ubuntu:300,700">
<link rel="stylesheet" media="screen" preload href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">

<script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script defer src="/scripts/scripts.js?v=2021-03-12.02"></script>
<script>
	window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
	ga('create','UA-4241275-1','auto');ga('send','pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>
</body>
</html>